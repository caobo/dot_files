# directory: $HOME/.config/latexmk/latexmkrc
# latexmkrc file
# author: Bo Cao
# date: May 28, 2023
# -------------------- 

# Latexmk build properties
$pdflatex = "pdflatex -file-line-error -halt-on-error -interaction=batchmode -synctex=1 -shell-escape %O %S";
$pdf_mode = 1;
$postscript_mode = $dvi_mode = 0;
$bibtex_use = 1;
$max_repeat = 5;
# $pdf_previewer = "open %O %S";
$pdf_previewer = "open %O %S";
$pdf_update_method = 4;
$auto_depencency_mode = 1;

# Other settings
$warnings_as_errors = 0;

# Build directory
$aux_dir = 'aux.nosync';

# Customized success command
$success_cmd = <<'EOS';
mkdir -p compiled_pdfs.nosync && \
cp ./%B.pdf ./compiled_pdfs.nosync/%B-$(date +"%F-%I_%p")_$USER.pdf
EOS

# List of file extensions to clean up
# Add synctex extensions so they are cleaned
push @generated_exts, 'synctex', 'synctex.gz';

# Clean files generated by custom dependencies
$cleanup_includes_cusdep_generated = 1;

# Clean files generated by LaTeX
$cleanup_includes_generated = 1;

# Use recorder feature to list input files
$recorder = 1;

$clean_ext = 'bbl lof lot aux log out toc nav snm';
# $clean_ext = '%R.aux %R.dvi %R.log %R.out tex~ bbl nav out snm synctex.gz';
$clean_full_ext = 'bbl synctex.gz _build';

# End of file
EOF
